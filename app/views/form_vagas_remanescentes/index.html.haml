!!!
%html{:lang => "pt-br"}
  %head
    %meta{:content => "text/html; charset=UTF-8", "http-equiv" => "Content-Type"}/
    %meta{:charset => "utf-8"}/
    %meta{:content => "IE=edge", "http-equiv" => "X-UA-Compatible"}/
    %meta{:content => "width=device-width, initial-scale=1", :name => "viewport"}/
    %title UNIVESP / Formulário de Vagas Remanescentes
    %link{:href => "https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css", :rel => "stylesheet"}/
    %link{:href => "https://code.jquery.com/ui/1.11.3/themes/smoothness/jquery-ui.css", :rel => "stylesheet"}/
    %link{:href => "https://apps.univesp.br/estagio/assets/stylesheets/ficha.css", :rel => "stylesheet"}/
    %link{:href => "https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css", :rel => "stylesheet"}/
    :css
      .green{background-color: #27c24c}
      .red{background-color: #f05050}
      .blue{background-color: #23b7e5}
      .black{background-color: black; color: white;}
      .m-t{margin-top: 10px}
      .mais{margin-top: 40px}
      .m-r{margin-right: 5px}
      .m-l{margin-left: 5px}
      .w{color: #ffffff}
      .none{text-decoration: none !important;}
      .bw2{border: solid gray 2px;}
      .br2{border-right: solid gray 2px !important}
      .bl2{border-left: solid gray 2px !important}
      .image-upload > input
      {
          display: none;
      }

      .image-upload img
      {
          width: 80px;
          cursor: pointer;
      }

      .contact_form input:focus:invalid, .contact_form textarea:focus:invalid { /* when a field is considered invalid by the browser */
        box-shadow: 0 0 5px #d45252;
        border-color: #b03535
      }

      .contact_form input:required:valid, .contact_form textarea:required:valid { /* when a field is considered valid by the browser */
        box-shadow: 0 0 5px #5cd053;
        border-color: #28921f;
      }
  %body{:style => "margin-top: 120px; max-width:970px;"}
    %script{:src => "https://code.jquery.com/jquery-1.10.2.js"}
    %script{:src => "https://code.jquery.com/ui/1.11.3/jquery-ui.js"}
    %script{:src => "https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"}
    .container{:style => "max-width:970px;"}
      .row
        .col-md-12
          / Topo
          .navbar.navbar-default.navbar-fixed-top.container{:style => "background-color:rgba(0,0,0,0.7); color:white; max-width:970px;"}
            .col-sm-12
              %h3
                %i.fa.fa-fw.fa-file-o
                Formulário de Vagas Remanescentes
                %span.label.label-danger.pull-right Prazo: 09/01/2017
          / Formulário
          %form.form-horizontal.contact_form
            %p
              %span{:style => "color:#AF1E23;"} * Campos obrigatórios.
              Certifique-se de preenchê-los todos antes de enviar o formulário.
              /
                a href="pedidosFULL.html" class="btn btn-default pull-right" style="margin-top:-15px;margin-right:-20px;">
                <span class="fa fa-fw fa-reply"></span> Voltar
                </a
            .container.boxes{:style => "max-width:970px;"}
              .well.col-md-8.col-md-offset-2{:style => "margin-top:2em; margin-bottom:2em; padding:2em 2em 1.4em 2em;"}
                %p Prezado(a) condidato(a),
                %p
                  %br>/
                  A inscrição para o Processo Seletivo para preenchimento de vagas remanescentes
                  %b ocorrerá no período de 10h do dia 12/12/2016 até 17h do dia 09/01/2017.
                  %br/
                  Para informações detalhadas sobre o processo seletivo, acesse:
                  %a{:href => "http://www.univesp.br/processos-seletivos/vagas-remanescentes", :target => "_blank"} www.univesp.br/processos-seletivos/vagas-remanescentes
                %p
                  %br/
                  %i Não serão aceitas inscrições por e-mail.
              .form-group
                %label.col-md-4.col-sm-4.control-label.obrigatorio{:for => "according"} De acordo:
                .checkbox.col-sm-5
                  %label
                    %input{:type => "checkbox", :required => ""}/
                    Declaro que li e aceito as condições
                    %br>/
                    da
                    = succeed "." do
                      %a{:href => "https://univesp.br/sites/527174b7b24a527adc000002/assets/568ba9f59caf4d7b3000005b/PORTARIA_UNIVESP_PR_01-2016.pdf", :target => "_blank"} Portaria UNIVESP PR nº 20/2015
              .form-group.mais
                %label.col-md-4.col-sm-4.control-label.obrigatorio{:for => "name"} Nome completo:
                .col-sm-5
                  %input.form-control{:type => "text", :style => "text-transform: capitalize;", :required => ""}/
              .form-group.mais
                %label.col-md-4.col-sm-4.control-label.obrigatorio{:for => "email"} E-mail:
                .col-sm-5
                  %input#email.form-control{:maxlength => "60", :name => "email", :size => "65", :type => "email", :required => ""}/
              .form-group.mais
                %label.col-md-4.col-sm-4.control-label.obrigatorio{:for => "phone"} Telefone:
                .col-sm-3
                  %input#phone.form-control{:maxlength => "15", :name => "phone", :type => "text", :required => ""}/
              .form-group.mais
                %label.col-md-4.col-sm-4.control-label.obrigatorio{:for => "cel"} Celular:
                .col-sm-3
                  %input.form-control{:maxlength => "15", :name => "cel", :onkeyup => "mascara( this, mphone );", :type => "text", :required => ""}/
              .form-group.mais
                %label.col-md-4.col-sm-4.control-label.obrigatorio{:for => ""} CPF:
                .col-sm-3
                  %input#cpf.form-control{:maxlength => "14", :name => "cpf", :required => "", :onblur => "javascript: validarCPF(this.value);", :onkeypress => "javascript: mascara(this, cpf_mask);", :type => "text"}/
              .form-inline.mais
                %label.col-md-4.col-sm-4.control-label.obrigatorio{:for => "date"} Data de nascimento:
                %div
                  %select.form-control{:style => "margin-left:10px;"}
                    %option Dia
                    - (1..31).each do |dia|
                      %option #{dia} 
                  %select.form-control                    
                    %option Mês
                    - (1..12).each do |month|
                      %option #{month}
                  %select.form-control                    
                    %option Ano
                    - (1916..2016).sort {|a,b| b <=> a}.each do |dia|
                      %option #{dia} 
              .form-group.mais
                %label.col-md-4.col-sm-4.control-label.obrigatorio{:for => "course"} Curso desejado:
                .col-sm-3
                  %select#course.form-control{:style => "width:90%;", :name => "course[]"}
                    - @univesp_courses.each do |course|
                      %option{ :value =>  "#{course[:value]}"} #{course[:text]}
              .form-group.mais
                %label.col-md-4.col-sm-4.control-label.obrigatorio{:for => "payment", :style => "margin-top:-10px;"} Faça o upload do seu comprovante de pagamento de inscrição ou isenção:
                .image-upload
                  %label.btn.btn-default{:for => "payment", :style => "margin-left:15px;", :title => "Envie o DIPLOMA caso formado."}
                    %span.fa.fa-dollar.m-r
                    Comprovante de inscrição
                  %input#payment{:type => "file"}/
              .form-group.mais
                %label.col-md-4.col-sm-4.control-label.obrigatorio{:for => "homeInstitution"} INSTITUIÇÃO de origem:
                .col-md-6
                  %input.form-control{:placeholder => "SIGLA - Nome por extenso (Pode citar mais de uma instituição)", :type => "text"}/
              .form-group.mais
                %label.col-md-4.col-sm-4.control-label.obrigatorio{:for => "course2"} CURSO:
                .col-md-6
                  %input.form-control{:placeholder => "Nome por extenso (Você pode citar mais de um curso)", :type => "text"}/
              .form-inline.mais
                %label.col-md-4.col-sm-4.control-label.obrigatorio{:for => "situation"} Situação atual:
                %div
                  %label.radio-inline{:style => "margin-left:10px;"}
                    %input#inlineRadio1{:name => "inlineRadioOptions", :type => "radio", :value => "option1"}/
                    Concluído
                  %label.radio-inline
                    %input#inlineRadio2{:name => "inlineRadioOptions", :type => "radio", :value => "option2"}/
                    Cursando
              .form-group.mais
                %label.col-md-4.col-sm-4.control-label.obrigatorio{:for => "documents", :style => "margin-top:-10px;"} Faça o upload dos seus documentos digitalizados:
                .image-upload
                  %label.btn.btn-default{:for => "universityDegree", :style => "margin-left:15px;", :title => "Envie o DIPLOMA caso formado."}
                    %span.fa.fa-graduation-cap.m-r
                    Diploma
                  %input#universityDegree{:type => "file", :required => ""}/
                  %label.btn.btn-default{:for => "registration", :title => "Envie o ATESTADO DE MATRÍCULA caso estudante."}
                    %span.fa.fa-certificate.m-r
                    Atestado de Matrícula
                  %input#registration{:type => "file"}/
                  %label.btn.btn-default{:for => "school", :title => "Envie o HISTÓRICO ESCOLAR contendo as disciplinas cursadas, carga horária, aproveitamento etc."}
                    %span.fa.fa-file-text-o.m-r
                    Histórico Escolar
                  %input#school{:type => "file"}/
              .form-group.mais
                %label.col-md-4.col-sm-4.control-label.obrigatorio{:for => "teste"} Em qual POLO Univesp deseja estudar ?
                .col-sm-6
                  %select.form-control{:style => "width:90%;", :name => "classe[]"}
                    - @univesp_classes.each do |classe|
                      %option{ :value =>  "#{classe[:value]}"} #{classe[:text]}
                  %p.help-block
                    %small
                      %b IMPORTANTE:
                      Escolha APENAS UM POLO E UMA TURMA e, se possível, abaixo, uma segunda e até uma terceira opção sempre no mesmo polo;
              .form-group.mais
                %label.col-md-4.col-sm-4.control-label.obrigatorio{:for => "pole2", :style => "margin-top:-10px;"}
                  %u> 2ª opção
                  \: Em qual outro período do MESMO POLO Univesp você desejaria estudar ?
                .col-sm-6
                  %select.form-control{:style => "width:90%;", :name => "classe[]"}
                    - @univesp_classes.each do |classe|
                      %option{ :value =>  "#{classe[:value]}"} #{classe[:text]}
              .form-group.mais
                %label.col-md-4.col-sm-4.control-label.obrigatorio{:for => "pole3", :style => "margin-top:-12px;"}
                  Qual seria sua
                  %u 3ª opção
                  de período do MESMO POLO Univesp em que você desejaria estudar ?
                .col-sm-6
                  %select.form-control{:style => "width:90%;", :name => "pole3[]"}
                    - @univesp_poles3.each do |pole|
                      %option{ :value =>  "#{pole[:value]}"} #{pole[:text]}
              .form-group.mais
                %label.col-md-4.col-sm-4.control-label.obrigatorio{:for => "poleConfirmation"} Assinale:
                .checkbox.col-sm-6
                  %label
                    %input{:type => "checkbox"}/
                    Declaro que CONFERI a escolha de Polo e turma(s) acima e ASSUMO a responsabilidade no caso de não atendimento de minha opção, por preenchimento incorreto.
              %hr.col-md-12.mais.m-b-lg/
              .well.col-md-8.col-md-offset-2{:style => "margin-top:2em; margin-bottom:50px; padding:2em 2em 1.4em 2em;"}
                %p Antes de prosseguir, leia com atenção:
                %p
                  %br>/
                  1. Para continuar, tenha em mãos os dados do seu curso superior atual ou concluído.
                %p
                  2.
                  %a Baixe as ementas dos cursos UNIVESP
                  e compare com as disciplinas que você cursou na outra Instituição de Ensino.
                %p 3. Preencha os campos abaixo caso julgue que a disciplina que você fez tenha conteúdo compatível à descrição da disciplina da UNIVESP.
                %p
                  4. Lembre-se que há um
                  = succeed "." do
                    %b critério de disciplinas mínimas que você deve atingir para concorrer à vaga preterida
                  %br/
                  %br/

              #activities-table
                = render 'activities_table', :activities => @univesp_activities
              
              .col-sm-6.mais
                %input.btn.btn-lg.blue.m-t.w.pull-left{:type => "submit"}
                  %span.glyphicon.glyphicon-arrow-left.m-r
                  Retornar ao questionário socioeconômico
              .col-sm-6.mais
                %a.btn.btn-lg.green.m-t.w.pull-right{:href => "VAGAS-remanescentes-2.html", :target => ""}
                  %span.glyphicon.glyphicon-share-alt.m-r
                  Finalizar e enviar formulários
            .container{:style => "border-bottom:4px solid gray;max-width:970px;"}



      / row
    / container    
    %script{:src => "https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"}
    %script{:src => "https://apps.univesp.br/estagio/assets/javascripts/jquery.maskedinput.min.js"}
    %script{:src => "https://apps.univesp.br/estagio/assets/javascripts/bootbox.min.js"}
    %script{:src => "https://apps.univesp.br/estagio/assets/javascripts/form.upload.js"}
    %script{:src => "https://apps.univesp.br/estagio/assets/javascripts/form.main.js"}
    %script{:src => "app/assets/javascripts/form_vagas_remanescentes.js"}
    %script{:src => "https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"}

    :javascript
      $fileInput = $('fileInput');
      $file = $('file');
      $("#clear").on("click", function () {
          $fileInput.replaceWith( $fileInput = $fileInput.clone( true ) );
          $file.replaceWith( $file = $file.clone( true ) );
          $fileInput1.replaceWith( $fileInput1 = $fileInput1.clone( true ) );
      });
      $("#course").on("change", function() {
        var courseId = $(this).val();
        console.log("courseId: " + courseId);

        $.ajax({
          url: "vagas-remanescentes/univesp-activities-by-course",
          data: { course_id: courseId }         
        })
        .done(function (data) {
          console.log("course change > done data:");
          console.log(data);
        })
        .fail(function (jqXHR, textStatus) {
          console.log("course change > fail jqXHR:");
          console.log(jqXHR);
          console.log("course change > fail textStatus:");
          console.log(textStatus);
        });
      
      });
